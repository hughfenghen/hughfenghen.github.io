# 风痕：资深前端大佬 B 站轮回记

笔者长期进行技术写作，自觉枯燥乏味，本次只能尽量把文章写得有观赏性一点。  
笔者虽读过三遍《红楼梦》，但各位观众老爷也不要对一个高考作文只写了 300 字的大专生抱有太高期望。

---

## 零

这是一个悲伤的故事。

## 一

它却是以喜剧开场的。

我在阿 B 的最后一轮面试。  
面试官：你平时在哪个平台看直播？  
我：我平时不看直播。  
就这样，我通过了 B 站直播资深前端岗位的面试。

拿到 offer 后，因为薪资涨幅不算高，其实我心理是有点犹豫的。  
第一位直属领导非常热情，我还没入职就每天都会微信找我聊几句。  
有天他微信说：你快看 B 站股票涨了好多，快点接 offer，如果股票涨到 35 刀，估计 HR 要跟你重新谈薪酬方案哦。

2020 年 5 月，我信了 B 站的未来 —— Z 世代，我信了股票增涨定能弥补遗憾。  
于是，我接了 offer，入职 B 站直播中心部门，职级 3-1 资深前端，花名风痕。  
同事们都叫我“大佬”，我很惶恐：你们怎么知道的。。。

果然，接下来天大喜事真可谓是鲜花着锦、烈火烹油，阿 B 股价同风起，笑声直上干云霄。

但他们的快乐与我无关，后来的事，大家都知道了；  
没过两年，我的股票还没归属，就落得个白茫茫大地真干净。

_注：Z 世代，通常是指 1995 年至 2009 年出生的一代人，他们一出生就与网络信息时代无缝对接_  
_注：B 站技术人均大佬，具体细分为：高级大佬、资深大佬、专家大佬，女装大佬_

## 二

直播部门内部讲究业务闭环，就是按业务垂直划分组织架构，区别于按岗位横向划分。  
所以按业务拆分有四个前端团队，这对我来说是一个坏消息，因为我的具体职责是前端工程优化，每个垂直的组就像一道垂直的墙。

我跟各组基层领导聊过几次之后，结论：

1. 我司的基建很差，特别是前端基建
2. 但目前都够用，没有什么迫切需要解决的困难
3. 业务非常忙，技术优化优先级都会排后面

由于刚入职，各方面都不熟悉，于是跟领导商量暂缓工程优化目标，改为面向团队内高级大佬的技术分享。  
这里的部分文章是分享的[资料][7]

## 三

技术分享没做几期，我就被一个音视频大佬“借”去接手直播 Web 播放器。  
为什么借我？因为其他人不想干。

这个是真大佬，业界知名，百科能搜到的那种，你也可称之为巨佬。  
_按 B 站习惯，我仍称大佬_

大佬很风趣、很大方、对工作很有激情，平时不玩 LoL（英雄联盟），工作需要也能非常投入地关注赛事直播。  
我很仰慕，不为别的，B 站的专家，职级 4-1 哎，居然还愿意写代码。  
而我，是打算把代码写到老的，有此榜样在，自然仰慕。

但终究是“错付”了，唉。

对我来说，大佬并不好相处，虽然平时很风趣，但工作时经常会在公共场合大声斥责下属，大部分下属都习惯了，我习惯不了。  
跟他沟通深感压力，平时自认为逻辑表达还不错，在他面前却看起来像个二傻子。  
所以，之后的几次组织架构调整，我都没有选择加入音视频团队。

至此，我在 B 站就跟这个播放器项目一起入了轮回。

## 四

为什么说“我跟播放器一起入了**轮回**”？  
因为了解 B 站的小伙伴都知道，B 站喜欢调组织架构，后来历经不知多少次调整，我都跟它一起。

接手播放器分两步，先去主站播放器组把直播的 Web 播放器交接过来，再进行重构。

主站跟直播大部门是拆了合、合了拆，而主站跟直播的播放器更是如此。  
当时，我还不知道在我之前，主站直播播放器就拆合过一次；  
当时，我更没想到在三年后，我又会带着亲手拆出去的播放器，重新回到主站播放器组。

话说阿 B 播放器，分久必合，合久必分。

**说起轮回，重构过程中还有一个趣事。**

开始，我感觉自己有点像“间谍”，交接的项目中有一个比较核心的内部 NPM 依赖包，我却没有代码访问权限，无代码重构谁碰到不头疼？

我非常直男地在会议上问交接方，为啥不能给我开代码权限？
对方：“...”。

但这个困难自然难不倒 3-1 的资深大佬，我不小心发现该依赖的 NPM 包中居然提交了 SourceMap 文件，于是利用 SourceMap 反解出源码，继续快乐地重构。

作为一个开发，每天都写新代码，当然是快乐的。  
快乐地忙碌半年后，项目终于顺利上线，没出什么幺蛾子。  
也拿到还行的结果 —— 我在 B 站唯一的四星绩效，成功晋升 3-2 资深大佬+，是当时直播前端的巅峰之一。

大概两年后，公司某个新业务部门也需要直播播放器的代码，进行定制开发。  
领导说：打个 NPM 包给他，不要给代码。

喂，这个画面怎么有点似曾相识啊？  
于是，我不小心把 SourceMap 文件打进了 NPM 包。

_注：NPM 是前端项目的包（依赖）管理工具_  
_注：SourceMap 是 JS 代码压缩混淆后与源码的映射文件_

## 五

重构期间，组织架构调整，换了领导，我本职还是做工程优化的前端。  
因为跟领导专业不对口，所以工作内容也很自由，纯靠自我驱动。

播放器重构上线后，我开始着手解决一个早已记入小本本的团队工程效率问题。

你敢信？ 2021 年，B 站规模一万多人，还在使用 SwitchHost 切换测试环境这种小作坊方案，这是我一入职就无法忍受的事情。

经过一年迭代与推广，新方案已然成熟，小有成效，在基层口碑也不错。  
取名 FF，因为键盘上这两个按键非常方便输入，引申含义 Fast-Forward。  
解决的诸多技术挑战此处自不必多言，其中部分技术实现写了文章和专利，这里有两篇相关文章：[Web 终极拦截技巧（全是骚操作）][6]、Web 自集成式代理方案（预告）

后来有两件小事让我印象比较深刻。

一是，方案在直播基本普及，当我打算推广到其它大部门时遇到了阻碍，所以寻求领导的支持时，领导说做成这样就够了，没必要推到其它部门。  
我猜大概原因是，领导是音视频方向，这个工程优化跟他的 OKR 目标不匹配，所以对他来说是没有价值的。

二是，一次偶然聊天，业务组领导问我“FF 是什么“。  
这让我有点震惊，当时 FF 的 PV 已经有 5000+，他下面的很多一线组员早就是 FF 的用户了，并且我在大周会上也汇报过两三次（相对别的项目来说，次数还是太少了）。

自然的，一年努力，叫好不叫座，即使后来 FF 的 PV 达到 1 万+，各岗位（研测产运）都有使用，但也是默默无闻、寂寥无声。

我想起，刚入职不久就听说了在 B 站前端开发“无人权”。  
一些前端开发认为是 B 站的业务，决定前端不那么重要，无法创造其他技术岗位那么多价值，我反问“为什么不能”。  
我想起，晋升答辩的时候，我的狂妄之言：适应环境，提升自己；改变环境，提升团队。

我看开了，佛系了。

_注： PV 指访问量_  
_注：研测产运，指研发、测试、产品、运营_

## 六

又换了组织、换了领导，组织架构已经调**麻**了，“危险”却在悄悄靠近。

在新的组我主动申请加入了创新项目，因为这个创新项目跟我业余开源的项目 [WebAV][2] 有关；  
WebAV 是基于 WebCodecs 构建的，我相信 [WebCodecs][4] 会像 [MSE][5] 一样，影响 Web 音视频这个领域。

但没料到，我又做了一次错误选择，至少短期来说是错误的。  
新项目失败，即使前端能力已达预期，我仍拿了一个二星绩效。  
我即使佛系不求高绩效，但也不能接受低绩效啊，毕竟影响年终奖与晋升。

我不服，申诉理由是

1. 项目失败不是前端造成的，我也按预期完成了功能开发
2. 即使当前项目失败，产出的技术能力可以复用到其它项目，未来还能创造价值
3. 这是新技术探索，发了文章、即将参加行业的技术分享，扩大了团队技术影响力

但申诉无果，还在会议室被三个领导加 HR “（言语）群殴”；  
这就像你本来希望来一个仲裁局，拿不到结果也至少能暴露一下问题，结果裁判直接加入了“殴打”你的行列。。。

后续公司虽有多个项目复用了该项目的技术成果，但我的低绩效早已实锤。

欣慰的是，在公司业务立项之前，WebAV 是我的个人项目已经开源，后来我花了大量业余时间编写[系列文章][3]，帮助前端开发者入门音视频领域，相当于给社区贡献了一点价值。

绩效申诉会议上，直属领导问：“你说你写的这个有价值，那么谁来回应（承认）它的**价值**呢？”  
我想现在，公司与社区都算有所回应了。

不甘低绩效、差点愤而离职的我，阴差阳错带着播放器回到了梦开始的地方 —— 主站播放器组，又一个**轮回**。

后面的事无甚可说。

回首总结，如此经历并非意外。  
B 站是我见过人情味最浓的技术公司，且组织调整过于频繁，而我一心写代码，没有一点政治敏感性，被饭搭子戏称为“消息绝缘体”，多次做了“错误”选择。  
有次饭搭子私下说，某位领导就像是华妃，balabala，说得还挺有道理。  
这要摆在《甄嬛传》里，我第一集没去领盒饭就不错了。

_注：WebCodecs、MSE 是 Web 平台在音视频领域的相关规范_  
_注：开源项目 Flv.js 基于 MSE，WebAV 基于 WebCodecs_

## 七

满纸荒唐言，一把辛酸泪。

<!-- 为什么写这篇文章？ -->

刚入职的时候，抱着吃瓜心态看了[谦谦的 2016 总结][2]；
没想到几年后竟看到了自己的影子：同样低学历，同样自驱做音视频创新项目，同样拿了低绩效，同感不公正而申诉，然后申诉失败。

颇有**轮回**之感。

我爱 B 站，纵她虐我千百遍，我仍待她如初恋。  
抛开技术成就感，B 站真的是我待过最舒服的公司。  
愿 B 站昌隆。

_注：谦谦是 Flv.js 开源项目的作者，2016 年因低薪资、低绩效而离职，成为技术圈一时热点_

## 八

这是一个悲伤的故事，希望这个瓜合乎观众老爷们的口味。

_等下一位轮回之人_

## 附录

- [谦谦的 2016 总结][2]
- [WebAV][1]：在浏览器中编辑音视频数据
- [Web 音视频系列文章][3]
- [Web 终极拦截技巧（全是骚操作）][6]
- [WebCodecs API][4]
- [MSE API][5]

[1]: https://github.com/hughfenghen/WebAV
[2]: https://xqq.im/2017/01/01/goodbye-2016/
[3]: https://hughfenghen.github.io/tag/WebAV/
[4]: https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API
[5]: https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API
[6]: https://hughfenghen.github.io/posts/2023/12/23/web-spy/
[7]: https://hughfenghen.github.io/tag/前端基础

2024.04.02
