---
tags:
  - 游戏
date: 2023-06-21
---

# DIY 游戏掌机

## 前言
对比分析了市场上的掌机，发现有些缺陷在当前是无解的。  
所以想通过 **mini主机 串流 手机** 来扬长避短。  

## 方案总结分析

**优点**
- 性能更强
- 自由度、可玩性更高
  - 不受掌机平台限制
  - win主机游戏更多，也不限于只玩游戏
- 屏幕观感更舒服；分辨率、帧率、色彩吊打掌机
- 续航6小时以上（四年旧手机
- 无散热压力：零噪音，不烫手
- 重量轻，更便携

**缺点**
- 学习成本，这套方案需要一点点折腾精神
- 延迟
  - 内网串流 10~30ms；跨网串流 30~1000ms+
  - 实测 北京-上海 延迟 60ms 左右
  - 远程游玩还可能掉帧
- 系统操作体验差
  - 进入游戏前，用手柄控制win系统有些麻烦
  - Steam 玩家可以开启大屏幕模式，可以改善这个问题，相当于一个 SteamDeck 系统
- 陀螺仪、震动反馈不工作
  - 降低了部分游戏的游玩体验

### 材料
**硬件**
- windows mini 主机，4400元
  - 酷睿 12代 i9
  - RTX 3050Ti laptop
  - 16G 内存
- 华为P30手机（已用4年的旧手机，忽略成本
  - 麒麟980，8G内存
  - 分辨率 2340x1080
- 安卓游戏手柄，434元
  - GameSir 盖世小鸡 X2Pro
  - 略贵，有更便宜的安卓手柄
  - 我看中了 手机typec给手柄供电，无需额外充电或电池
  - 手感不错，霍尔扳机按键（LT、RT）与XBox不兼容
- 有线鼠标
  - 买主机有送，插在主机上可以省去一些麻烦
- 联通光猫、华为路由
  - 下文跨外网远程连接设计这两个的一些配置
  - 路由最好支持 WIFI6

**软件**
- [Parsec](https://dash.parsec.app/) 串流  
  - 官方文档很详细，但都是英文
  - 中文网友也有很多讲解文章
- Steam
  - 即使不玩 Steam 游戏也要安装，因为 Steam 有手柄映射方案（默认无需配置）用来控制电脑，所以请将 Steam 设为开机自动启动
  - 首次登录 Steam 需要翻墙，翻墙软件开启全局代理即可，后续不翻墙也能离线启动
- 翻墙软件，梯子千千万能翻就行

## 组建过程

### 安装配置 [Parsec](https://dash.parsec.app/)
1. 注册、登录需要翻墙
2. 下载安装，参考 [官方文档](https://support.parsec.app/hc/en-us/articles/4422936195213-Install-Parsec-App-on-Windows)  
   注意 ‘Per user’ 与 ‘Shared’ 时建议选 Shared 
3. 回退到虚拟屏幕  
   如果电脑没有连接显示器，必须开启，`host -> Fallback to virtual display -> on`  


### Win系统配置
1. [开机跳过登录](https://www.dongchuanmin.com/operate/5823.html)   
2. 鼠标轨迹，不配置的话，在手机上将看不见鼠标光标  
   win控制中心 -> 硬件 -> 鼠标 -> 指针选项 -> 显示指针轨迹，时间调到最短
3. [自定义 Parsec 分辨率](https://support.parsec.app/hc/en-us/articles/4423615425293-VDD-Advanced-Configuration)，根据网络、手机的分辨率自定义合适分辨率
   - 比如手机分辨率是 `2340 x 1080`
   - 创建了两个自定义分辨率 `2340 x 1080`、`1560 x 720`，在手机上就是全屏效果，没有黑边  
   - 操作完成后，自定义的选项在 `桌面右键 -> 显示设置 -> 分辨率` 中选择  
   

### Steam 手柄方案
访问 `steam -> 设置 -> 控制器 -> 桌面布局` 可以查看编辑 steam 手柄按键的行为。  

背景：手柄控制系统不是很方便，特别是鼠标移动，要么太快要么太慢。  
所以建议**使用左右两个遥感分两档**控制鼠标移动：  
1. 将左摇杆改为移动鼠标，修改灵敏度，稍快一点  
2. 调整右摇杆（默认就是控制鼠标的）灵敏度，尽量慢一点

如果主要玩 Steam 游戏，可以 `右键 Steam 托盘icon -> 大屏幕`，相当于 SteamDeck 系统

#### 默认按键映射
1. A 回车（换行， 确认）
2. B 空格（网页翻页，视频播放/暂停）
3. X PageUp（往上滚动）
4. Y PageDown（往下滚动）
5. 左摇杆 改为快速鼠标，按下呼出软键盘
6. 右摇杆 改为慢速鼠标
7. LB Ctrl（双击 高亮鼠标位置）
8. RB Alt（Alt） + 左上角的查看按钮（Tab） 切换程序
9. RT 鼠标左键
10. RB 鼠标右键
11. 右上角菜单按钮（三横线） ESC（取消、退出）

### 光猫、路由配置
可略过的配置，如果需要**跨网（在外网）串流**才需要以下配置。  
网络设备： `光猫 - 路由器 - win主机，手机`

首先需要一个公网ip：
1. 确认是否已有公网ip，访问 https://ip.900cha.com/ 
   如果`我的ip` 非 10 或 172 开头，说明已经有公网ip了
2. 如果没有，请联系运营商

#### 配置步骤
*光猫、路由的配置页，一般是内网的ip地址，如 `192.168.1.1`、`192.168.3.1`，具体情况网上搜教程*  

1. 光猫配置允许 UPnP
2. 光猫允许所有NAT ALG设置，全允许（勾选）  
   该项配置需要管理员权限，打电话给运营商报个故障就能要到管理员账号  
3. 光猫将 NAT DMZ 设置为路由
4. 路由开启 UPnP
5. 路由将 win主机 设置为 DMZ 主机  

*经过上述配置，你win主机将被暴露在外网，拥有最大的访问便利，也需注意安全*  

tips：
如果两端都支持 [IPV6](https://test-ipv6.com/) 能直接跨网串流。  

## 常见问题

### 手机上看不见鼠标光标
参考上文 **Win系统配置**  

### 手机有大量黑边
参考上文  **自定义 Parsec 分辨率**   

### 手机上左上角的icon很碍眼
- 建议在 Parsec client 中可以关闭键盘icon  
- Parsec Icon 连接后可随时关闭  

### 手柄没有陀螺仪 怎么玩体感游戏
教程： <https://www.bilibili.com/video/BV1cs4y167iB/>  


## 其他问题
在评论区留言，我看到会回复  